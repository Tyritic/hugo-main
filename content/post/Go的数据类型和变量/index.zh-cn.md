---
date : '2025-06-11T16:57:17+08:00'
draft : false
title : 'Go的数据类型和变量'
image : ""
categories : ["Golang"]
tags : [""]
description : ""
math : true
---
## 变量的声明方式

声明变量的一般形式是使用 **`var`** 关键字，有以下使用方法

- 指定变量类型，声明后若不赋值，使用默认值。

  ```go
  var var_name var_type
  ```

- 根据值自行判定变量类型（类型推导）

  ```go
  var v_name = value
  ```

- 省略 **`var`** , 使用初始化声明 **`:=`** 

  - **`:=`** 左侧的变量不应该是已经声明过的，否则会导致编译错误。
  - 在定义变量 a 之前使用它，则会得到编译错误 undefined: a。
  - 声明了一个局部变量却没有在相同的代码块中使用它，同样会得到编译错误


```go
v_name := value
```

示例代码

```go
package main


import "fmt"


func main() {
        //第一种 使用默认值
        var a int
        fmt.Printf("a = %d\n", a)


        //第二种
        var b int = 10
        fmt.Printf("b = %d\n", b)


        //第三种 省略后面的数据类型,自动匹配类型
        var c = 20
        fmt.Printf("c = %d\n", c)


        //第四种 省略var关键字
        d := 3.14
        fmt.Printf("d = %f\n", d)
}
```

- 多变量声明方式

  - 对于全局变量可以采用分解的方式来一次性声明

    ```go
    var x, y int 
    var ( // 分解的写法,一般用于声明全局变量
            a int
            b bool
    )
    ```

  - 也可以直接使用单变量的三种方式

    ```go
    var c, d int = 1, 2
    var e, f = 123, "liudanbing"
    g, h := 123 //只能在函数体内使用
    ```

## 基本数据类型

Go的数据类型分类与Java类似分为基本数据类型和派生数据类型

- 基本数据类型
  - 数值型
    - 整数型
    - 浮点型
  - 字符型（没有专门的字符型，使用 **`byte`** 来保存字符）
  - 布尔型：**`bool`**
  - 字符串：**`String`**
- 派生数据类型
  - 指针
  - 数组
  - 结构体
  - 管道
  - 函数
  - 切片
  - 接口
  - map

### 数值型

#### 整数型

整数型用于存储整数数值

有符号整数

| 类型  | 有无符号 | 占用存储空间 |       数据范围       |
| :---: | :------: | :----------: | :------------------: |
| int8  |    有    |   1个字节    |     $-128$~$127$     |
| int16 |    有    |   2个字节    | $-2^{15}$~$2^{15}-1$ |
| int32 |    有    |   3个字节    | $-2^{31}$~$2^{31}-1$ |
| int64 |    有    |   4个字节    | $-2^{63}$~$2^{63}-1$ |

无符号整数

|  类型  | 有无符号 | 占用存储空间 |    数据范围    |
| :----: | :------: | :----------: | :------------: |
| uint8  |    无    |   1个字节    |   $0$~$255$    |
| uint16 |    无    |   2个字节    | $0$~$2^{16}-1$ |
| uint32 |    无    |   3个字节    | $0$~$2^{32}-1$ |
| uint64 |    无    |   4个字节    | $0$~$2^{64}-1$ |

其他整数类型

| 类型 | 有无符号 |          占用存储空间          |                           数据范围                           |            注意事项             |
| :--: | :------: | :----------------------------: | :----------------------------------------------------------: | :-----------------------------: |
| int  |    有    | 32位系统4个字节64位系统8个字节 | $-2^{31}$~$2^{31}-1$（32位系统）<br>$-2^{63}$ ~$2^{63}-1$（64位系统） |                                 |
| uint |    无    | 32位系统4个字节64位系统8个字节 |  $0$~$2^{32}-1$（32位系统）<br> $0$~$2^{64}-1$（64位系统）   |                                 |
| rune |    有    |            3个字节             |                     $-2^{31}$~$2^{31}-1$                     | 等价 int32，表示一个 Unicode 码 |
| byte |    无    |            1个字节             |                          $0$~$255$                           |     当要存储字符时选用byte      |

Golang中的默认整数类型为 **`int`**

#### 浮点数型

|  类型   | 占用存储空间 | 表数范围 |
| :-----: | :----------: | :------: |
| float32 |    4字节     |          |
| float64 |    8字节     |          |

注意事项

- Golang 浮点类型有固定的范围和字段长度，不受具体 OS(操作系统)的影响。
- Golang 的浮点型默认声明为 **`float64`** 类型。

### 字符型

Golang 中没有专门的字符类型，如果要存储单个字符(字母)，一般使用 **`byte`** 来保存。字符串就是一串固定长度的字符连接起来的字符序列。Go的字符串是由单个字节连接起来的。也就是说对于传统的字符串是由字符组成的，而Go的字符串不同，它是由字节组成的。

Go中的字符型使用 **`byte`** 来保存，字符使用 **`' '`** 括起来

```go
var x byte ='a'
```

可以使用转义字符将字符变成特殊字符常量，常见的转义字符如下

- **`\t`** ：制表符
- **`\n`** ：换行符
- **`\r`** ：一个回车

注意事项

- Go的字符采用UTF-8编码，字符本质上是一个整数，直接输出时是输出字符的UTF-8码值
- 使用格式化输出 **`%c`** 才能输出字符值

### 布尔类型

布尔类型使用 **`bool`** 存储，大小为1个字节，只允许值为 **`true`** 和 **`false`**

### 字符串类型

字符串就是一串固定长度的字符连接起来的字符序列。Go 的字符串是由单个字节连接起来的。Go语言的字符串的字节使用 UTF-8 编码标识 Unicode 文本。字符串的编码为UTF8 ，源代码中的文本字符串通常被解释为采用 UTF8 编码的 Unicode 码点（rune）序列。因此字符串可以包含任意的数据

#### 底层原理

```Go
type StringHeader struct {
    Data uintptr
    Len  int
}
```

注意事项

- 在Go中字符串是不可变的，类似Java
- 表示方法
  - 使用双引号 **`“ ”`** 表示字符串会识别转义字符
  - 使用反引号 **`· ·`** 以字符串的原生形式输出，包括换行和特殊字符，可以实现防止攻击、输出源代码等效果
- 字符串之间使用 **`+`** 进行拼接
- 对于长字符串使用分行拼接处理，将 **`+`** 保留在上一行

## 基本数据类型的默认值

在 go 中，数据类型都有一个默认值，当没有赋值时，就会保留默认值，在go 中，默认值又叫零值。

| 数据类型 | 默认值 |
| :------: | :----: |
|   int    |   0    |
|  float   |   0    |
|  string  |   ""   |
|   bool   | false  |

## 基本数据类型之间的相互转换

Go和Java不同，Go不支持数据类型的自动转换需要显式自动转换

语法格式

```go
var i dataType
var j =newType(i)
```

### 基本数据类型和string之间的转换

#### 基本数据类型转string

- **`fmt.Sprintf("%参数",表达式)`**
- 使用 **`strconv`** 包中的函数
  - **`func FormatBool(b bool) string`**
  - **`func FormatInt(i int64,base int) string`**
  - **`func FormatFloat(f float64,fmt byte,prec,bitSize int) string`**

#### string转基本类型

- 使用 **`strcov`** 包中的函数
  - **`func ParseBool(str string) (value bool, err error)`**
  - **`func ParseFloat(s string, bitSize int) (f float64,er error)`**
  - **`func Parselnt(s string, base int, bitSize int) ( int64,err error)`**
  - **`func ParseUint(s string, b int, bitSize int) (n uint64 err error)`**

## 指针

类似于C++，Go保留了指针

指针保存了值的内存地址，其零值为 **`nil`** 。

- 取址符：**`&`** 操作符生成一个指向其操作数的指针，获取地址。
- 解引用：**`*`** 操作符表示指针指向的底层值。

## 结构体

一个结构体（`struct`）就是一组 字段（field）。

```go
// 声明
type struct_variable_type struct {
   member definition
   member definition
   ...
   member definition
}
// 初始化
variable_name := structure_variable_type {value1, value2...valuen}
```

Go的结构体支持匿名字段，用于在一个结构体中插入另一个结构体，可以用于模拟实现继承行为

结构体常通过指针传递，避免复制整个结构体，提高性能。



## 数组

类型 [n]T 表示一个数组，它拥有 `n` 个类型为 `T` 的值。

### 声明方法

```Go
var a [n]T //基本方式
primes := [6]int{2, 3, 5, 7, 11, 13} //字面量声明
balance := [...]float32{1000.0, 2.0, 3.4, 7.0, 50.0} //不确定数组长度
```

### 存储特点

- 数组的长度是其类型的一部分，因此数组不能改变大小。
- 数组元素类型相同
- 数组在内存中连续存储
- 如果数组长度不确定，可以使用 `...` 代替数组的长度，编译器会根据元素个数自行推断数组的长度
- 数组是值类型，并不是隐式的指向第一个元素的指针（比如 C 语言的数组），而是一个完整的值赋值和传参会复制整个数组

### 遍历方式

使用 **`range`** 循环进行遍历，其中第一个返回值为数组下标，第二个返回值为数组值

```Go
for i, v := range b {     // 通过数组指针迭代数组的元素
    fmt.Println(i, v)
}
```

## 值数据类型和引用数据类型

数据类型分为值数据类型和引用数据类型

- 值数据类型：这种类型的变量直接指向存在内存中的值
- 引用数据类型：这种类型的变量存储的是变量所在的内存地址

常见的值数据类型有

- 布尔：bool
- 字符串：string
- 数值型
  - 有符号整数
    - **`int`**  
    - **`int8`**  
    - **`int16`**  
    - **`int32`**  
    - **`int64`**
  - 无符号整数
    - **`uint`** 
    - **`uint8`** 
    - **`uint16`** 
    - **`uint32`** 
    - **`uint64`** 
    - **`uintptr`**
  - 字符型：**`byte`** // uint8 的别名 
  - **`rune`** // int32 的别名，表示一个 Unicode 码位
  - 浮点型
    - **`float32`** 
    - **`float64`**
  - 虚数
    - **`complex64`** 
    - **`complex128`**
- 数组
- 结构体

常见的引用数据类型

- 指针
- 切片
- 映射

## 常量

常量是一个简单值的标识符，在程序运行时，不会被修改的量。

### 定义

常量中的数据类型只可以是布尔型、数字型（整数型、浮点型和复数）和字符串型。

```go
const identifier [type] = value
```

- 其中type可以省略，go可以通过类型推断
- 常量不能用 **`:=`** 语法声明。

### 自增长

在 golang 中，一个方便的习惯就是使用 **`iota`** 标示符，它简化了常量用于增长数字的定义，给以上相同的值以准确的分类。

```go
const (
    CategoryBooks = iota // 0
    CategoryHealth       // 1
    CategoryClothing     // 2
)
```

底层原理：当你在一个 **`const`** 组中仅仅有一个标示符在一行的时候，它将使用增长的 **`iota`** 取得前面的表达式并且再运用它
